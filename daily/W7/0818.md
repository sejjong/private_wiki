# W7

## 0818 리뷰/회고

## day30 리뷰
### 팀활동
문제 설정에 대해서 오류를 진짜 거의 일주일 만에 알아 차림

왜 이떄까지 on-call = street hailing 이라고 생각했을까 ...

그렇기 때문에 이 문제를 구체화 하지 않고 보낸 시간들이 조금 아쉽게 느껴짐

API server를 신이 해준다고 생각하고

어떤 지표를 보내줄 지 파이프라인 구성하자 

-> API server에서 처리해야 할 것을 생각안하니 좀더 명확해 지고 무엇을 해야할지 알 것 같음

진짜 팀원이랑 얘기 나눈 것들 전부 문서화 하고 최대한 많은 질문을 하자 ...!


#### 지표 관련
zone의 개념이 바뀐다면 (더 넓어진다면)

zone 간의 이동거리, 이동시간 , 예상매출(얘는 필요없을 듯 이용횟수만을 늘리고싶으니까)

택시가 manhattan 을 벗어나게 된다면 어떻게해야할까 ?

자율주행 택시였기때문에 zone을 선택하면 이 안에서 어떻게 움직일지 모른다 그렇기 때문에 zone을 최대한 짧게 쪼개야한다고 생각을 했었다

하지만 자율주행택시가 아닌 street hailing 기반 택시가 된 이상 zone을 뭉뚱그러서 추천을 해주고 

그 zone 안에서 heat map처럼 횟수가 많았던 곳을 표시해 준다면 그게 더 좋지 않을까 ?? 

zone으로 한다면 그 zone에서 출발했을때 평균 임금에 대해서도 생각해볼수있을 것 같다

1. 지금 위치한 zone과 주변 zone 비교
2. 지금 zone이 수요 가장 높음 → 머무른다 (얼마나? 언제까지?)
3. 다른 zone이 수요가 높음 → 이동한다 (어느방향으로 ? → 기사가 알아서, 추천 zone으로 들어가기만 하면 됨)
4. 다른 zone으로 이동했다 쳐 → 머무른다 (얼마나? 언제까지?)
5. 손님을 태웠는데 계산되지 않은 zone으로 이동하게 된다면 어떻게?

얼마나? 언제까지?에 대한 답변을 위한 지표를 생각해 보아야 겠다

### 개인활동
프로그램이 어떻게 발전해나가고 있는지 모르면 문제가 터져도 대처를 못하게 된다

그렇기에 지금의 프로그램을 공부하는것 이상으로 과거 어떻게 발전해왔는지 공부도 필수 !!

Catalyst Optimizer는 rule based engine 이다 즉 rule이 있다는 것!

우리가 spark를 작성할 때 physical plan 을 작성하는게 아니라 logical plan을 작성한다

그랬을때 내부적으로 파싱 → 논리 계획 생성 → 논리 최적화

→ 물리 계획 생성 → 코드 생성 단계를 거친다.

logical optimization 부분에서는 catalog를 통해서,

그리고 physical optimization 부분에서는 Cost Model을 사용하여 

여러 물리적 실행 계획 중 가장 적합한 계획을 선택한다.

여기서 cost model을 고르는 것은 데이터에 따라 다르다(우선순위?) !

Whole-Stage Code Generation을 통해 CPU 오버헤드를 줄이고 성능을 극대화한다.

Dynamic Partition Pruning(DPP은 차원 테이블 필터를 기반으로 큰 사실 테이블의 파티션을 런타임에 동적으로 줄인다

Adaptive Query Execution(AQE)는 실행 도중 데이터 통계에 따라 실행 계획을 동적으로 조정하여 데이터 skew와 불확실한 데이터 크기(앞에서는 estimate만 했음)에 대응한다.

AQE의 핵심 기능은 Shuffle 파티션 동적 병합(Coalesce), 조인 전략 동적 선택(Broadcast/Sort-Merge 변환), Skewed Join 최적화.

Shuffle은 groupBy, join, distinct, repartition 등 다양한 변환에서 발생하며, AQE는 이를 최소화하도록 최적화한다.
## day30 회고

### Keep

### Problem
프로젝트의 방향성에 대해서 주말동안 피드백 받지 않고 시간을 보낸 것

-> 진짜 방향성과 관련된 지표, 아이디어 등 모든것에 대해서 피드백 받을 것 (Dano 님을 많이 써먹자 제발)
### Try
